<div class="flex">
    <mat-drawer-container class="h-screen w-1/2 w-1/2">
        <mat-drawer mode="side" opened class="w-1/3">
            <div class="drawer-header flex justify-center text-center h-1/6 py-4 border-b">
                <!-- <h1 class="font-bold">RouteMentor</h1> -->
                <img src="/assets/img/logo_routementor.png" class="" />
            </div>
            <div class="drawer-menu h-5/6 flex flex-col">
                <div *ngFor="let step of trip.steps; let i = index"
                    class="flex items-center justify-center grow border-b content-center cursor-pointer hover:bg-primary/70"
                    (click)="onClickMenuStepButton(i)"
                    [ngClass]="this.selectedStep.id === i + 1 ? 'selected-step' : ''">
                    <span class="font-bold text-lg">Étape {{i + 1}}</span>
                </div>
            </div>
        </mat-drawer>
        <mat-drawer-content class="w-2/3 pt-4">
            <!-- CURRENT STEP -->
            <div class="h-full flex flex-col items-center">
                <div class="step-header">
                    <div class="flex flex-col justify-center mb-4 text-center">
                        <p class="font-bold text-2xl text-quinary">{{ selectedStep.to }}
                        </p>
                        <p>
                            {{selectedStep.date}} -
                            {{computeLeavingDate(selectedStep.date,selectedStep.travelDuration)}}
                        </p>
                    </div>

                    <div class="mb-4">
                        <p>Durée : {{selectedStep.travelDuration}} jours</p>
                        <p>Hébergement : {{selectedStep.hostingName}} (à partir de {{selectedStep.hostingCost}} €
                            <mat-icon class="material-icons-outlined mt-auto text-base" #tooltip="matTooltip"
                                matTooltip="Ce prix est une estimation du coût total. Cela peut ne pas refléter la réalité."
                                matTooltipPosition="above">info</mat-icon>)
                        </p>
                    </div>
                </div>

                <div class="w-full">
                    <mat-divider></mat-divider>
                </div>

                <div class="step-activity flex flex-col items-center justify-center mb-4 text-center w-full">
                    <div class="justify-center font-bold text-xl text-quinary mt-4">
                        Liste des activités
                    </div>

                    <div class="mt-8 text-center" *ngIf="activitiesLoading">
                        <div class="flex w-full justify-center mb-2">
                            <mat-progress-spinner mode="indeterminate" diameter="40">
                            </mat-progress-spinner>
                        </div>
                        <p class="text-sm font-light">
                            Récupération des activités en cours...
                        </p>
                        <p class="text-xs font-light">
                            (Veuillez patienter 1-2 minutes)
                        </p>
                    </div>
                    <app-step-activity-list *ngIf="!activitiesLoading" [selectedStep]="selectedStep"
                        [activityCategories]="trip.activitiesCategories" (searchForActivity)="onSearchNewActivities()">
                    </app-step-activity-list>
                </div>
            </div>
        </mat-drawer-content>
    </mat-drawer-container>

    <app-map-roadtrip class="h-screen w-1/2" [trip]="trip" (stepMarkerClicked)="handleStepMarkerClicked($event)">
    </app-map-roadtrip>
</div>